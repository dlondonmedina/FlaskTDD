<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>10. Intro to Templates - Test-Driven Development with Flask</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Test-Driven Development with Flask</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">One <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch1/" class="dropdown-item">1. Intro to TDD</a>
</li>
                                    
<li>
    <a href="../ch2/" class="dropdown-item">2. Types of Tests</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Two <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch3/" class="dropdown-item">3. Intro to Objects</a>
</li>
                                    
<li>
    <a href="../ch4/" class="dropdown-item">4. TDD with Objects</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Three <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch5/" class="dropdown-item">5. The Internet</a>
</li>
                                    
<li>
    <a href="../ch6/" class="dropdown-item">6. TDD Online</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Four <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch7/" class="dropdown-item">7. Intro to Flask</a>
</li>
                                    
<li>
    <a href="../ch8/" class="dropdown-item">8. Smallest App</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Five <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch9/" class="dropdown-item">9. Intro to HTML</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">10. Intro to Templates</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Six <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch11/" class="dropdown-item">11. Decorators</a>
</li>
                                    
<li>
    <a href="../ch12/" class="dropdown-item">12. Templates the TDD Way</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Seven <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ch13/" class="dropdown-item">13. Forms the TDD way</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../ch9/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../ch11/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#flask-templates" class="nav-link">Flask Templates</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#templates" class="nav-link">Templates</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#other-frontend-options" class="nav-link">Other Frontend Options</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="flask-templates">Flask Templates</h1>
<p>If you recall from the last page on Flask we created an app in our file <strong>init</strong>.py in the app folder. Then we wrapped the app with our routes (specifically the index function that returns text). When we type flask run in our terminal the built in Flask server (the service that runs our app) starts up listening on the ip address 127.0.0.1 port 5000. 127.0.0.1 is a local ip address that your computer's network card establishes for internal traffic. In other words, if I browse to 127.0.0.1 in my web browser (note: you can enter ip addresses directly into the URL bar in the web browser), my browser sends a request to my own network card and any server that happens to be running on my computer listening at that address. If you have an Apache server on your computer (Linux has one by default), then the Apache server will be listening for traffic on that address and will return some configuration info as a webpage. This IP address is a local address and cannot be accessed from the outside world, so on every computer, the local host address is the same. The port (5000) indicates which service at a particular IP address we're directing traffic to. By default, http traffic goes to port 80 and https traffic goes to port 443. Our Flask server runs at port 5000. Once the Flask server is listening on our local host, when we try to visit it, the server sends the request to our app, which has specified routes and actions to perform when particular routes are requested. Let's take a look at a sample URL to break that down a bit.</p>
<pre><code>https://127.0.0.1/gallery.html
</code></pre>

<p>If I were to type that into my browser's URL bar, my browser would make a request using the https protocol, which means that the request would be encrypted, to the IP address 127.0.0.1 (port 443 by default). Along with that request, it would say "give me the resource gallery.html." The Apache server listening at that IP address and port would receive the request and look for a file called gallery.html. If that file exists, then the server will send the file back to the browser (or client) with a response code of 200 (meaning, success). If that file or resource does not exist, then the server would send back response code 404 (meaning, error: resource not found). As the browser receives the page gallery.html from the server, it would read through the header to see if there are any additional files to include like style sheets or javascript files. It will make additional requests to the server (or other servers) to gather those additional resources. The browser then loads all of those resources, applies any relevant scripts and styles, and gives you a lovely web page that you can see in the browser window. That's basically how static web sites work. They are a bunch of html files living on a server.</p>
<p>Flask is similar but instead of simply being a static set of html files, it is a dynamic application. So, let's look at another URL to explain this.</p>
<pre><code>https://127.0.0.1/index
</code></pre>

<p>In this case, my browser makes a request using the https protocol to IP address 127.0.0.1 (port 443 by default), exactly like last time. This time, however, the request is asking not for a static html file, but rather a resource called "index." Now Flask knows about this particular resource because we created the route "/index" in our routes.py file and applied that route to the application. The application running on the Flask server knows that when a browser requests that resource ("/index") or that route, it needs to call the index() method. If we look at that method, we know that it returns "Hello, Flask!" So, the app gathers that and sends it back to the client. This is why you get a page with Hello, Flask! at the top of it. The method at a particular route could be more complex and could generate more stuff, which we're going to talk about on this page, but overall, this is how the Flask server handles traffic. It looks at everything after the base domain (127.0.0.1 or www.example.com, or whatever) and calls all of the appropriate functions, which gather data from a database (or put data into a database), pull up templates, populate those templates with data, and finally send the populated templates as html strings to the browser to display just as if they were static html pages (just built on the fly).</p>
<h2 id="templates">Templates</h2>
<p>A template is little more than an html document with variables. The problem with html files and static pages is that you cannot change the content in them without using javascript. Let's say I want to create a blog that's going to have a million posts. To do this statically, I'd need to either have one page with a million spots for blog entries with the blog entries already written out, or I'd need a million files where all of the content (menus, footers, borders, etc) are all exactly the same, but the text and author of the particular post might be different. Here is an example of what a static blog page might look like:</p>
<pre><code class="html">&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Blog post 200&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav&gt;
   &lt;ul&gt;
      &lt;li&gt;Home&lt;/li&gt;
      &lt;li&gt;Author&lt;/li&gt;
      &lt;li&gt;
         Posts
         &lt;ul&gt;
            &lt;li&gt;1&lt;/li&gt;
            &lt;li&gt;2&lt;/li&gt;
            &lt;li&gt;3&lt;/li&gt;
            &lt;li&gt;4&lt;/li&gt;
            &lt;li&gt;...&lt;/li&gt;            
            &lt;li&gt;200&lt;/li&gt;
         &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Contact&lt;/li&gt;
   &lt;/ul&gt;
&lt;/nav&gt;
&lt;h1&gt;Post 200&lt;/h1&gt;
&lt;h2&gt;Dylan Medina&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet consectetur, adipisicing elit. Magnam dolorum earum, quae blanditiis minima quis ipsam labore, ad, veniam iste quod ipsa aliquam! Alias numquam quas neque repellendus eaque. Sunt. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae tempore deserunt ipsam libero reiciendis consequatur fugit sit saepe repudiandae! Quos quaerat fugiat voluptatibus accusantium esse earum, similique eveniet nam dolor! Culpa odio optio eaque porro aliquid accusantium veritatis iste voluptates fugiat vel, deserunt, placeat officia. Sequi at error, possimus totam, tempore pariatur est voluptatum, quis asperiores laboriosam rerum temporibus necessitatibus. Quis delectus expedita quas explicabo debitis laudantium. Fugiat, alias in incidunt voluptates adipisci at nemo error dignissimos eos. Mollitia voluptas expedita rem veritatis minima ex doloribus reprehenderit accusantium beatae. Dignissimos! Ipsam numquam quo quod illum esse est, ullam ea veritatis voluptatem iusto qui, voluptatum quisquam corporis blanditiis voluptate vel quaerat dicta, officiis delectus possimus voluptas ratione pariatur doloremque. Rerum, harum! Numquam fugiat rerum molestiae assumenda necessitatibus eveniet accusamus at ut sed unde. Dicta odio autem corporis sunt commodi, rerum excepturi quos libero labore. Mollitia inventore eveniet dicta, aliquid enim ullam!&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Now imagine I had a million files exactly like that, but different content in the author field and the paragraph. It seems super wasteful, even if I copy and paste all of the structure. Let's say I want to make a change to the menu (add another post to the Posts sub menu, for instance); I'd have to change the menu on every single file. Likewise, all of that content would exist as a million files on my server. Really a gross kind of site to both build and maintain. However, static sites are making a comeback as templating gets more powerful. </p>
<p>A template allows us to create a single static html file (or "template") that has areas that are populated by dynamic content. For instance, in my million post blog, I could simply create a template that has a variable space for the author, title, and post. Then I have a single html file with variables that get populated by text by the server as it prepares to send a response to the client browser. A template using Jinja, which is what Flask uses by default, of the million post blog would look like this:</p>
<pre><code class="html">&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Blog Post {{ title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav&gt;
   &lt;ul&gt;
      &lt;li&gt;Home&lt;/li&gt;
      &lt;li&gt;Author&lt;/li&gt;
      &lt;li&gt;
         Posts
         &lt;ul&gt;
            {% for t in post_titles %}
            &lt;li&gt;{{ t }}&lt;/li&gt;
            {% endfor %}
         &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Contact&lt;/li&gt;
   &lt;/ul&gt;
&lt;/nav&gt;
&lt;h1&gt;Post {{ title }}&lt;/h1&gt;
&lt;h2&gt;{{ author }}&lt;/h2&gt;
&lt;p&gt;{{ body_content }}&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>You can see above, title is now a dynamic value that will be populated when the request is made. Likewise, instead of a menu with a huge list of posts, I have a for loop which will create linkes for posts from some list (post_titles) that is passed to the template. The author is also a variable that is passed to the template, and so is the body_content. I now have a single html file (you'll learn that Jinja templates can also extend each other, so you might have one base.html file, then a few templates that extend the base template for different types of pages) that can hold any blog post content. A function in my flask app (probably that takes an input parameter) will populate that template with the relevant data depending on the specific input parameter. So, if I wanted to request post 200, the browser might send a request to the url <code>https://127.0.0.1/blog/200</code>. The Flask app listening at 127.0.0.1 would look for a route blog with the parameter 200. Ideally, there will be a method call that occurs at that route. The method would probably pull the content for post 200 out of the database and fill it into the template that it renders. What database, what template, and how that data all gets massaged together will depend on my specific design, but the basic operation will be the same.</p>
<p>There's not much more to it. In Flask, templates are pretty easy. In general, "programming" kinds of operations (like loops and conditionals) are surrounded by {% %}, the most difficult character sequence to type ever. Then variables are surrounded by double moustaches {{ }}. You pass those variables to the template with the render_template method.</p>
<h2 id="other-frontend-options">Other Frontend Options</h2>
<p>It is possible to send data back as JSON or some other data structure as well. It is not uncommon for people to use Flask as the back end of the website. It manages data and states. Then you might use a Javascript framework like Vue or React for the front end. These frameworks often provide a better, easier to build and maintain front end user interface. However, this is beyond the scope of what we are doing here. It's just worth knowing these exist.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
